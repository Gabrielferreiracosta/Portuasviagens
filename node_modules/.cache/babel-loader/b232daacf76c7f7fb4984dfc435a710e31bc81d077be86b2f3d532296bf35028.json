{"ast":null,"code":"/* instafeed.js | v2.0.0 | https://github.com/stevenschobert/instafeed.js | License: MIT */(function(global,factory){typeof exports===\"object\"&&typeof module!==\"undefined\"?module.exports=factory():typeof define===\"function\"||self,global.Instafeed=factory();})(this,function(){\"use strict\";function assert(val,msg){if(!val){throw new Error(msg);}}function Instafeed(options){assert(!options||typeof options===\"object\",\"options must be an object, got \"+options+\" (\"+typeof options+\")\");var opts={accessToken:'IGQVJYRHdZAaDhFTE5HbUFDZA3RtVzJSdlJIbmZAnODdsckZA6NFlpajdQdEc2QTE3a0FSQ3BKMVNTMjVaVVhrZA3BINzNoV3NMY3poak9xWXZADVHNicG9RdHVzaFFOSVhTd1RaUXN6ejgxNFJHTDdaSUlqbwZDZD',accessTokenTimeout:1e4,after:null,apiTimeout:1e4,apiLimit:null,before:null,debug:false,error:null,filter:null,limit:null,mock:false,render:null,sort:null,success:null,target:\"instafeed\",template:'<a href=\"{{link}}\"><img title=\"{{caption}}\" src=\"{{image}}\" /></a>',templateBoundaries:[\"{{\",\"}}\"],transform:null};var state={running:false,node:null,token:null,paging:null,pool:[]};if(options){for(var optKey in opts){if(typeof options[optKey]!==\"undefined\"){opts[optKey]=options[optKey];}}}assert(typeof opts.target===\"string\"||typeof opts.target===\"object\",\"target must be a string or DOM node, got \"+opts.target+\" (\"+typeof opts.target+\")\");assert(typeof opts.accessToken===\"string\"||typeof opts.accessToken===\"function\",\"accessToken must be a string or function, got \"+opts.accessToken+\" (\"+typeof opts.accessToken+\")\");assert(typeof opts.accessTokenTimeout===\"number\",\"accessTokenTimeout must be a number, got \"+opts.accessTokenTimeout+\" (\"+typeof opts.accessTokenTimeout+\")\");assert(typeof opts.apiTimeout===\"number\",\"apiTimeout must be a number, got \"+opts.apiTimeout+\" (\"+typeof opts.apiTimeout+\")\");assert(typeof opts.debug===\"boolean\",\"debug must be true or false, got \"+opts.debug+\" (\"+typeof opts.debug+\")\");assert(typeof opts.mock===\"boolean\",\"mock must be true or false, got \"+opts.mock+\" (\"+typeof opts.mock+\")\");assert(typeof opts.templateBoundaries===\"object\"&&opts.templateBoundaries.length===2&&typeof opts.templateBoundaries[0]===\"string\"&&typeof opts.templateBoundaries[1]===\"string\",\"templateBoundaries must be an array of 2 strings, got \"+opts.templateBoundaries+\" (\"+typeof opts.templateBoundaries+\")\");assert(!opts.template||typeof opts.template===\"string\",\"template must null or string, got \"+opts.template+\" (\"+typeof opts.template+\")\");assert(!opts.error||typeof opts.error===\"function\",\"error must be null or function, got \"+opts.error+\" (\"+typeof opts.error+\")\");assert(!opts.before||typeof opts.before===\"function\",\"before must be null or function, got \"+opts.before+\" (\"+typeof opts.before+\")\");assert(!opts.after||typeof opts.after===\"function\",\"after must be null or function, got \"+opts.after+\" (\"+typeof opts.after+\")\");assert(!opts.success||typeof opts.success===\"function\",\"success must be null or function, got \"+opts.success+\" (\"+typeof opts.success+\")\");assert(!opts.filter||typeof opts.filter===\"function\",\"filter must be null or function, got \"+opts.filter+\" (\"+typeof opts.filter+\")\");assert(!opts.transform||typeof opts.transform===\"function\",\"transform must be null or function, got \"+opts.transform+\" (\"+typeof opts.transform+\")\");assert(!opts.sort||typeof opts.sort===\"function\",\"sort must be null or function, got \"+opts.sort+\" (\"+typeof opts.sort+\")\");assert(!opts.render||typeof opts.render===\"function\",\"render must be null or function, got \"+opts.render+\" (\"+typeof opts.render+\")\");assert(!opts.limit||typeof opts.limit===\"number\",\"limit must be null or number, got \"+opts.limit+\" (\"+typeof opts.limit+\")\");assert(!opts.apiLimit||typeof opts.apiLimit===\"number\",\"apiLimit must null or number, got \"+opts.apiLimit+\" (\"+typeof opts.apiLimit+\")\");this._state=state;this._options=opts;}Instafeed.prototype.run=function run(){var scope=this;this._debug(\"run\",\"options\",this._options);this._debug(\"run\",\"state\",this._state);if(this._state.running){this._debug(\"run\",\"already running, skipping\");return false;}this._start();this._debug(\"run\",\"getting dom node\");if(typeof this._options.target===\"string\"){this._state.node=document.getElementById(this._options.target);}else{this._state.node=this._options.target;}if(!this._state.node){this._fail(new Error(\"no element found with ID \"+this._options.target));return false;}this._debug(\"run\",\"got dom node\",this._state.node);this._debug(\"run\",\"getting access token\");this._getAccessToken(function onTokenReceived(err,token){if(err){scope._debug(\"onTokenReceived\",\"error\",err);scope._fail(new Error(\"error getting access token: \"+err.message));return;}scope._debug(\"onTokenReceived\",\"got token\",token);scope._state.token=token;scope._showNext(function onNextShown(err){if(err){scope._debug(\"onNextShown\",\"error\",err);scope._fail(err);return;}scope._finish();});});return true;};Instafeed.prototype.hasNext=function hasNext(){var paging=this._state.paging;var pool=this._state.pool;this._debug(\"hasNext\",\"paging\",paging);this._debug(\"hasNext\",\"pool\",pool.length,pool);return pool.length>0||paging&&typeof paging.next===\"string\";};Instafeed.prototype.next=function next(){var scope=this;if(!scope.hasNext()){scope._debug(\"next\",\"hasNext is false, skipping\");return false;}if(scope._state.running){scope._debug(\"next\",\"already running, skipping\");return false;}scope._start();scope._showNext(function onNextShown(err){if(err){scope._debug(\"onNextShown\",\"error\",err);scope._fail(err);return;}scope._finish();});};Instafeed.prototype._showNext=function showNext(callback){var scope=this;var url=null;var poolItems=null;var hasLimit=typeof this._options.limit===\"number\";scope._debug(\"showNext\",\"pool\",scope._state.pool.length,scope._state.pool);if(scope._state.pool.length>0){if(hasLimit){poolItems=scope._state.pool.splice(0,scope._options.limit);}else{poolItems=scope._state.pool.splice(0);}scope._debug(\"showNext\",\"items from pool\",poolItems.length,poolItems);scope._debug(\"showNext\",\"updated pool\",scope._state.pool.length,scope._state.pool);if(scope._options.mock){scope._debug(\"showNext\",\"mock enabled, skipping render\");}else{try{scope._renderData(poolItems);}catch(renderErr){callback(renderErr);return;}}callback(null);}else{if(scope._state.paging&&typeof scope._state.paging.next===\"string\"){url=scope._state.paging.next;}else{url=\"https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=\"+scope._state.token;if(!scope._options.apiLimit&&typeof scope._options.limit===\"number\"){scope._debug(\"showNext\",\"no apiLimit set, falling back to limit\",scope._options.apiLimit,scope._options.limit);url=url+\"&limit=\"+scope._options.limit;}else if(typeof scope._options.apiLimit===\"number\"){scope._debug(\"showNext\",\"apiLimit set, overriding limit\",scope._options.apiLimit,scope._options.limit);url=url+\"&limit=\"+scope._options.apiLimit;}}scope._debug(\"showNext\",\"making request\",url);scope._makeApiRequest(url,function onResponseReceived(err,data){var processed=null;if(err){scope._debug(\"onResponseReceived\",\"error\",err);callback(new Error(\"api request error: \"+err.message));return;}scope._debug(\"onResponseReceived\",\"data\",data);scope._success(data);scope._debug(\"onResponseReceived\",\"setting paging\",data.paging);scope._state.paging=data.paging;try{processed=scope._processData(data);scope._debug(\"onResponseReceived\",\"processed data\",processed);if(processed.unused&&processed.unused.length>0){scope._debug(\"onResponseReceived\",\"saving unused to pool\",processed.unused.length,processed.unused);for(var i=0;i<processed.unused.length;i++){scope._state.pool.push(processed.unused[i]);}}}catch(processErr){callback(processErr);return;}if(scope._options.mock){scope._debug(\"onResponseReceived\",\"mock enabled, skipping append\");}else{try{scope._renderData(processed.items);}catch(renderErr){callback(renderErr);return;}}callback(null);});}};Instafeed.prototype._processData=function processData(data){var hasTransform=typeof this._options.transform===\"function\";var hasFilter=typeof this._options.filter===\"function\";var hasSort=typeof this._options.sort===\"function\";var hasLimit=typeof this._options.limit===\"number\";var transformedFiltered=[];var limitDelta=null;var dataItem=null;var transformedItem=null;var filterResult=null;var unusedItems=null;this._debug(\"processData\",\"hasFilter\",hasFilter,\"hasTransform\",hasTransform,\"hasSort\",hasSort,\"hasLimit\",hasLimit);if(typeof data!==\"object\"||typeof data.data!==\"object\"||data.data.length<=0){return null;}for(var i=0;i<data.data.length;i++){dataItem=this._getItemData(data.data[i]);if(hasTransform){try{transformedItem=this._options.transform(dataItem);this._debug(\"processData\",\"transformed item\",dataItem,transformedItem);}catch(err){this._debug(\"processData\",\"error calling transform\",err);throw new Error(\"error in transform: \"+err.message);}}else{transformedItem=dataItem;}if(hasFilter){try{filterResult=this._options.filter(transformedItem);this._debug(\"processData\",\"filter item result\",transformedItem,filterResult);}catch(err){this._debug(\"processData\",\"error calling filter\",err);throw new Error(\"error in filter: \"+err.message);}if(filterResult){transformedFiltered.push(transformedItem);}}else{transformedFiltered.push(transformedItem);}}if(hasSort){try{transformedFiltered.sort(this._options.sort);}catch(err){this._debug(\"processData\",\"error calling sort\",err);throw new Error(\"error in sort: \"+err.message);}}if(hasLimit){limitDelta=transformedFiltered.length-this._options.limit;this._debug(\"processData\",\"checking limit\",transformedFiltered.length,this._options.limit,limitDelta);if(limitDelta>0){unusedItems=transformedFiltered.slice(transformedFiltered.length-limitDelta);this._debug(\"processData\",\"unusedItems\",unusedItems.length,unusedItems);transformedFiltered.splice(transformedFiltered.length-limitDelta,limitDelta);}}return{items:transformedFiltered,unused:unusedItems};};Instafeed.prototype._extractTags=function extractTags(str){var exp=/#([^\\s]+)/gi;var badChars=/[~`!@#$%^&*()\\-+={}[\\]:;\"'<>?,./|\\\\\\s]+/i;var tags=[];var match=null;if(typeof str===\"string\"){while((match=exp.exec(str))!==null){if(badChars.test(match[1])===false){tags.push(match[1]);}}}return tags;};Instafeed.prototype._getItemData=function getItemData(data){var type=null;var image=null;switch(data.media_type){case\"IMAGE\":type=\"image\";image=data.media_url;break;case\"VIDEO\":type=\"video\";image=data.thumbnail_url;break;case\"CAROUSEL_ALBUM\":type=\"album\";image=data.media_url;break;}return{caption:data.caption,tags:this._extractTags(data.caption),id:data.id,image:image,link:data.permalink,model:data,timestamp:data.timestamp,type:type,username:data.username};};Instafeed.prototype._renderData=function renderData(items){var hasTemplate=typeof this._options.template===\"string\";var hasRender=typeof this._options.render===\"function\";var item=null;var itemHtml=null;var container=null;var html=\"\";this._debug(\"renderData\",\"hasTemplate\",hasTemplate,\"hasRender\",hasRender);if(typeof items!==\"object\"||items.length<=0){return;}for(var i=0;i<items.length;i++){item=items[i];if(hasRender){try{itemHtml=this._options.render(item,this._options);this._debug(\"renderData\",\"custom render result\",item,itemHtml);}catch(err){this._debug(\"renderData\",\"error calling render\",err);throw new Error(\"error in render: \"+err.message);}}else if(hasTemplate){itemHtml=this._basicRender(item);}if(itemHtml){html=html+itemHtml;}else{this._debug(\"renderData\",\"render item did not return any content\",item);}}this._debug(\"renderData\",\"html content\",html);container=document.createElement(\"div\");container.innerHTML=html;this._debug(\"renderData\",\"container\",container,container.childNodes.length,container.childNodes);while(container.childNodes.length>0){this._debug(\"renderData\",\"appending child\",container.childNodes[0]);this._state.node.appendChild(container.childNodes[0]);}};Instafeed.prototype._basicRender=function basicRender(data){var exp=new RegExp(this._options.templateBoundaries[0]+\"([\\\\s\\\\w.]+)\"+this._options.templateBoundaries[1],\"gm\");var template=this._options.template;var match=null;var output=\"\";var substr=null;var lastIndex=0;var keyPath=null;var keyPathValue=null;while((match=exp.exec(template))!==null){keyPath=match[1];substr=template.slice(lastIndex,match.index);output=output+substr;keyPathValue=this._valueForKeyPath(keyPath,data);if(keyPathValue){output=output+keyPathValue.toString();}lastIndex=exp.lastIndex;}if(lastIndex<template.length){substr=template.slice(lastIndex,template.length);output=output+substr;}return output;};Instafeed.prototype._valueForKeyPath=function valueForKeyPath(keyPath,data){var exp=/([\\w]+)/gm;var match=null;var key=null;var lastValue=data;while((match=exp.exec(keyPath))!==null){if(typeof lastValue!==\"object\"){return null;}key=match[1];lastValue=lastValue[key];}return lastValue;};Instafeed.prototype._fail=function fail(err){var didHook=this._runHook(\"error\",err);if(!didHook&&console&&typeof console.error===\"function\"){console.error(err);}this._state.running=false;};Instafeed.prototype._start=function start(){this._state.running=true;this._runHook(\"before\");};Instafeed.prototype._finish=function finish(){this._runHook(\"after\");this._state.running=false;};Instafeed.prototype._success=function success(data){this._runHook(\"success\",data);this._state.running=false;};Instafeed.prototype._makeApiRequest=function makeApiRequest(url,callback){var called=false;var scope=this;var apiRequest=null;var callbackOnce=function callbackOnce(err,value){if(!called){called=true;callback(err,value);}};apiRequest=new XMLHttpRequest();apiRequest.ontimeout=function apiRequestTimedOut(){callbackOnce(new Error(\"api request timed out\"));};apiRequest.onerror=function apiRequestOnError(){callbackOnce(new Error(\"api connection error\"));};apiRequest.onload=function apiRequestOnLoad(event){var contentType=apiRequest.getResponseHeader(\"Content-Type\");var responseJson=null;scope._debug(\"apiRequestOnLoad\",\"loaded\",event);scope._debug(\"apiRequestOnLoad\",\"response status\",apiRequest.status);scope._debug(\"apiRequestOnLoad\",\"response content type\",contentType);if(contentType.indexOf(\"application/json\")>=0){try{responseJson=JSON.parse(apiRequest.responseText);}catch(err){scope._debug(\"apiRequestOnLoad\",\"json parsing error\",err,apiRequest.responseText);callbackOnce(new Error(\"error parsing response json\"));return;}}if(apiRequest.status!==200){if(responseJson&&responseJson.error){callbackOnce(new Error(responseJson.error.code+\" \"+responseJson.error.message));}else{callbackOnce(new Error(\"status code \"+apiRequest.status));}return;}callbackOnce(null,responseJson);};apiRequest.open(\"GET\",url,true);apiRequest.timeout=this._options.apiTimeout;apiRequest.send();};Instafeed.prototype._getAccessToken=function getAccessToken(callback){var called=false;var scope=this;var timeoutCheck=null;var callbackOnce=function callbackOnce(err,value){if(!called){called=true;clearTimeout(timeoutCheck);callback(err,value);}};if(typeof this._options.accessToken===\"function\"){this._debug(\"getAccessToken\",\"calling accessToken as function\");timeoutCheck=setTimeout(function accessTokenTimeoutCheck(){scope._debug(\"getAccessToken\",\"timeout check\",called);callbackOnce(new Error(\"accessToken timed out\"),null);},this._options.accessTokenTimeout);try{this._options.accessToken(function accessTokenReceiver(err,value){scope._debug(\"getAccessToken\",\"received accessToken callback\",called,err,value);callbackOnce(err,value);});}catch(err){this._debug(\"getAccessToken\",\"error invoking the accessToken as function\",err);callbackOnce(err,null);}}else{this._debug(\"getAccessToken\",\"treating accessToken as static\",typeof this._options.accessToken);callbackOnce(null,this._options.accessToken);}};Instafeed.prototype._debug=function debug(){var args=null;if(this._options.debug&&console&&typeof console.log===\"function\"){args=[].slice.call(arguments);args[0]=\"[Instafeed] [\"+args[0]+\"]\";console.log.apply(null,args);}};Instafeed.prototype._runHook=function runHook(hookName,data){var success=false;if(typeof this._options[hookName]===\"function\"){try{this._options[hookName](data);success=true;}catch(err){this._debug(\"runHook\",\"error calling hook\",hookName,err);}}return success;};return Instafeed;});","map":{"version":3,"names":["global","factory","exports","module","define","self","Instafeed","assert","val","msg","Error","options","opts","accessToken","accessTokenTimeout","after","apiTimeout","apiLimit","before","debug","error","filter","limit","mock","render","sort","success","target","template","templateBoundaries","transform","state","running","node","token","paging","pool","optKey","length","_state","_options","prototype","run","scope","_debug","_start","document","getElementById","_fail","_getAccessToken","onTokenReceived","err","message","_showNext","onNextShown","_finish","hasNext","next","showNext","callback","url","poolItems","hasLimit","splice","_renderData","renderErr","_makeApiRequest","onResponseReceived","data","processed","_success","_processData","unused","i","push","processErr","items","processData","hasTransform","hasFilter","hasSort","transformedFiltered","limitDelta","dataItem","transformedItem","filterResult","unusedItems","_getItemData","slice","_extractTags","extractTags","str","exp","badChars","tags","match","exec","test","getItemData","type","image","media_type","media_url","thumbnail_url","caption","id","link","permalink","model","timestamp","username","renderData","hasTemplate","hasRender","item","itemHtml","container","html","_basicRender","createElement","innerHTML","childNodes","appendChild","basicRender","RegExp","output","substr","lastIndex","keyPath","keyPathValue","index","_valueForKeyPath","toString","valueForKeyPath","key","lastValue","fail","didHook","_runHook","console","start","finish","makeApiRequest","called","apiRequest","callbackOnce","value","XMLHttpRequest","ontimeout","apiRequestTimedOut","onerror","apiRequestOnError","onload","apiRequestOnLoad","event","contentType","getResponseHeader","responseJson","status","indexOf","JSON","parse","responseText","code","open","timeout","send","getAccessToken","timeoutCheck","clearTimeout","setTimeout","accessTokenTimeoutCheck","accessTokenReceiver","args","log","call","arguments","apply","runHook","hookName"],"sources":["C:/www/portuasviagens/src/instafeed/instafeed.js"],"sourcesContent":["/* instafeed.js | v2.0.0 | https://github.com/stevenschobert/instafeed.js | License: MIT */\r\n(function(global, factory) {\r\n    typeof exports === \"object\" && typeof module !== \"undefined\" ? module.exports = factory() : typeof define === \"function\" || self, \r\n    global.Instafeed = factory();\r\n  })(this, function() {\r\n    \"use strict\";\r\n    function assert(val, msg) {\r\n      if (!val) {\r\n        throw new Error(msg);\r\n      }\r\n    }\r\n    function Instafeed(options) {\r\n      assert(!options || typeof options === \"object\", \"options must be an object, got \" + options + \" (\" + typeof options + \")\");\r\n      var opts = {\r\n        accessToken: 'IGQVJYRHdZAaDhFTE5HbUFDZA3RtVzJSdlJIbmZAnODdsckZA6NFlpajdQdEc2QTE3a0FSQ3BKMVNTMjVaVVhrZA3BINzNoV3NMY3poak9xWXZADVHNicG9RdHVzaFFOSVhTd1RaUXN6ejgxNFJHTDdaSUlqbwZDZD',\r\n        accessTokenTimeout: 1e4,\r\n        after: null,\r\n        apiTimeout: 1e4,\r\n        apiLimit: null,\r\n        before: null,\r\n        debug: false,\r\n        error: null,\r\n        filter: null,\r\n        limit: null,\r\n        mock: false,\r\n        render: null,\r\n        sort: null,\r\n        success: null,\r\n        target: \"instafeed\",\r\n        template: '<a href=\"{{link}}\"><img title=\"{{caption}}\" src=\"{{image}}\" /></a>',\r\n        templateBoundaries: [ \"{{\", \"}}\" ],\r\n        transform: null\r\n      };\r\n      var state = {\r\n        running: false,\r\n        node: null,\r\n        token: null,\r\n        paging: null,\r\n        pool: []\r\n      };\r\n      if (options) {\r\n        for (var optKey in opts) {\r\n          if (typeof options[optKey] !== \"undefined\") {\r\n            opts[optKey] = options[optKey];\r\n          }\r\n        }\r\n      }\r\n      assert(typeof opts.target === \"string\" || typeof opts.target === \"object\", \"target must be a string or DOM node, got \" + opts.target + \" (\" + typeof opts.target + \")\");\r\n      assert(typeof opts.accessToken === \"string\" || typeof opts.accessToken === \"function\", \"accessToken must be a string or function, got \" + opts.accessToken + \" (\" + typeof opts.accessToken + \")\");\r\n      assert(typeof opts.accessTokenTimeout === \"number\", \"accessTokenTimeout must be a number, got \" + opts.accessTokenTimeout + \" (\" + typeof opts.accessTokenTimeout + \")\");\r\n      assert(typeof opts.apiTimeout === \"number\", \"apiTimeout must be a number, got \" + opts.apiTimeout + \" (\" + typeof opts.apiTimeout + \")\");\r\n      assert(typeof opts.debug === \"boolean\", \"debug must be true or false, got \" + opts.debug + \" (\" + typeof opts.debug + \")\");\r\n      assert(typeof opts.mock === \"boolean\", \"mock must be true or false, got \" + opts.mock + \" (\" + typeof opts.mock + \")\");\r\n      assert(typeof opts.templateBoundaries === \"object\" && opts.templateBoundaries.length === 2 && typeof opts.templateBoundaries[0] === \"string\" && typeof opts.templateBoundaries[1] === \"string\", \"templateBoundaries must be an array of 2 strings, got \" + opts.templateBoundaries + \" (\" + typeof opts.templateBoundaries + \")\");\r\n      assert(!opts.template || typeof opts.template === \"string\", \"template must null or string, got \" + opts.template + \" (\" + typeof opts.template + \")\");\r\n      assert(!opts.error || typeof opts.error === \"function\", \"error must be null or function, got \" + opts.error + \" (\" + typeof opts.error + \")\");\r\n      assert(!opts.before || typeof opts.before === \"function\", \"before must be null or function, got \" + opts.before + \" (\" + typeof opts.before + \")\");\r\n      assert(!opts.after || typeof opts.after === \"function\", \"after must be null or function, got \" + opts.after + \" (\" + typeof opts.after + \")\");\r\n      assert(!opts.success || typeof opts.success === \"function\", \"success must be null or function, got \" + opts.success + \" (\" + typeof opts.success + \")\");\r\n      assert(!opts.filter || typeof opts.filter === \"function\", \"filter must be null or function, got \" + opts.filter + \" (\" + typeof opts.filter + \")\");\r\n      assert(!opts.transform || typeof opts.transform === \"function\", \"transform must be null or function, got \" + opts.transform + \" (\" + typeof opts.transform + \")\");\r\n      assert(!opts.sort || typeof opts.sort === \"function\", \"sort must be null or function, got \" + opts.sort + \" (\" + typeof opts.sort + \")\");\r\n      assert(!opts.render || typeof opts.render === \"function\", \"render must be null or function, got \" + opts.render + \" (\" + typeof opts.render + \")\");\r\n      assert(!opts.limit || typeof opts.limit === \"number\", \"limit must be null or number, got \" + opts.limit + \" (\" + typeof opts.limit + \")\");\r\n      assert(!opts.apiLimit || typeof opts.apiLimit === \"number\", \"apiLimit must null or number, got \" + opts.apiLimit + \" (\" + typeof opts.apiLimit + \")\");\r\n      this._state = state;\r\n      this._options = opts;\r\n    }\r\n    Instafeed.prototype.run = function run() {\r\n      var scope = this;\r\n      this._debug(\"run\", \"options\", this._options);\r\n      this._debug(\"run\", \"state\", this._state);\r\n      if (this._state.running) {\r\n        this._debug(\"run\", \"already running, skipping\");\r\n        return false;\r\n      }\r\n      this._start();\r\n      this._debug(\"run\", \"getting dom node\");\r\n      if (typeof this._options.target === \"string\") {\r\n        this._state.node = document.getElementById(this._options.target);\r\n      } else {\r\n        this._state.node = this._options.target;\r\n      }\r\n      if (!this._state.node) {\r\n        this._fail(new Error(\"no element found with ID \" + this._options.target));\r\n        return false;\r\n      }\r\n      this._debug(\"run\", \"got dom node\", this._state.node);\r\n      this._debug(\"run\", \"getting access token\");\r\n      this._getAccessToken(function onTokenReceived(err, token) {\r\n        if (err) {\r\n          scope._debug(\"onTokenReceived\", \"error\", err);\r\n          scope._fail(new Error(\"error getting access token: \" + err.message));\r\n          return;\r\n        }\r\n        scope._debug(\"onTokenReceived\", \"got token\", token);\r\n        scope._state.token = token;\r\n        scope._showNext(function onNextShown(err) {\r\n          if (err) {\r\n            scope._debug(\"onNextShown\", \"error\", err);\r\n            scope._fail(err);\r\n            return;\r\n          }\r\n          scope._finish();\r\n        });\r\n      });\r\n      return true;\r\n    };\r\n    Instafeed.prototype.hasNext = function hasNext() {\r\n      var paging = this._state.paging;\r\n      var pool = this._state.pool;\r\n      this._debug(\"hasNext\", \"paging\", paging);\r\n      this._debug(\"hasNext\", \"pool\", pool.length, pool);\r\n      return pool.length > 0 || paging && typeof paging.next === \"string\";\r\n    };\r\n    Instafeed.prototype.next = function next() {\r\n      var scope = this;\r\n      if (!scope.hasNext()) {\r\n        scope._debug(\"next\", \"hasNext is false, skipping\");\r\n        return false;\r\n      }\r\n      if (scope._state.running) {\r\n        scope._debug(\"next\", \"already running, skipping\");\r\n        return false;\r\n      }\r\n      scope._start();\r\n      scope._showNext(function onNextShown(err) {\r\n        if (err) {\r\n          scope._debug(\"onNextShown\", \"error\", err);\r\n          scope._fail(err);\r\n          return;\r\n        }\r\n        scope._finish();\r\n      });\r\n    };\r\n    Instafeed.prototype._showNext = function showNext(callback) {\r\n      var scope = this;\r\n      var url = null;\r\n      var poolItems = null;\r\n      var hasLimit = typeof this._options.limit === \"number\";\r\n      scope._debug(\"showNext\", \"pool\", scope._state.pool.length, scope._state.pool);\r\n      if (scope._state.pool.length > 0) {\r\n        if (hasLimit) {\r\n          poolItems = scope._state.pool.splice(0, scope._options.limit);\r\n        } else {\r\n          poolItems = scope._state.pool.splice(0);\r\n        }\r\n        scope._debug(\"showNext\", \"items from pool\", poolItems.length, poolItems);\r\n        scope._debug(\"showNext\", \"updated pool\", scope._state.pool.length, scope._state.pool);\r\n        if (scope._options.mock) {\r\n          scope._debug(\"showNext\", \"mock enabled, skipping render\");\r\n        } else {\r\n          try {\r\n            scope._renderData(poolItems);\r\n          } catch (renderErr) {\r\n            callback(renderErr);\r\n            return;\r\n          }\r\n        }\r\n        callback(null);\r\n      } else {\r\n        if (scope._state.paging && typeof scope._state.paging.next === \"string\") {\r\n          url = scope._state.paging.next;\r\n        } else {\r\n          url = \"https://graph.instagram.com/me/media?fields=caption,id,media_type,media_url,permalink,thumbnail_url,timestamp,username&access_token=\" + scope._state.token;\r\n          if (!scope._options.apiLimit && typeof scope._options.limit === \"number\") {\r\n            scope._debug(\"showNext\", \"no apiLimit set, falling back to limit\", scope._options.apiLimit, scope._options.limit);\r\n            url = url + \"&limit=\" + scope._options.limit;\r\n          } else if (typeof scope._options.apiLimit === \"number\") {\r\n            scope._debug(\"showNext\", \"apiLimit set, overriding limit\", scope._options.apiLimit, scope._options.limit);\r\n            url = url + \"&limit=\" + scope._options.apiLimit;\r\n          }\r\n        }\r\n        scope._debug(\"showNext\", \"making request\", url);\r\n        scope._makeApiRequest(url, function onResponseReceived(err, data) {\r\n          var processed = null;\r\n          if (err) {\r\n            scope._debug(\"onResponseReceived\", \"error\", err);\r\n            callback(new Error(\"api request error: \" + err.message));\r\n            return;\r\n          }\r\n          scope._debug(\"onResponseReceived\", \"data\", data);\r\n          scope._success(data);\r\n          scope._debug(\"onResponseReceived\", \"setting paging\", data.paging);\r\n          scope._state.paging = data.paging;\r\n          try {\r\n            processed = scope._processData(data);\r\n            scope._debug(\"onResponseReceived\", \"processed data\", processed);\r\n            if (processed.unused && processed.unused.length > 0) {\r\n              scope._debug(\"onResponseReceived\", \"saving unused to pool\", processed.unused.length, processed.unused);\r\n              for (var i = 0; i < processed.unused.length; i++) {\r\n                scope._state.pool.push(processed.unused[i]);\r\n              }\r\n            }\r\n          } catch (processErr) {\r\n            callback(processErr);\r\n            return;\r\n          }\r\n          if (scope._options.mock) {\r\n            scope._debug(\"onResponseReceived\", \"mock enabled, skipping append\");\r\n          } else {\r\n            try {\r\n              scope._renderData(processed.items);\r\n            } catch (renderErr) {\r\n              callback(renderErr);\r\n              return;\r\n            }\r\n          }\r\n          callback(null);\r\n        });\r\n      }\r\n    };\r\n    Instafeed.prototype._processData = function processData(data) {\r\n      var hasTransform = typeof this._options.transform === \"function\";\r\n      var hasFilter = typeof this._options.filter === \"function\";\r\n      var hasSort = typeof this._options.sort === \"function\";\r\n      var hasLimit = typeof this._options.limit === \"number\";\r\n      var transformedFiltered = [];\r\n      var limitDelta = null;\r\n      var dataItem = null;\r\n      var transformedItem = null;\r\n      var filterResult = null;\r\n      var unusedItems = null;\r\n      this._debug(\"processData\", \"hasFilter\", hasFilter, \"hasTransform\", hasTransform, \"hasSort\", hasSort, \"hasLimit\", hasLimit);\r\n      if (typeof data !== \"object\" || typeof data.data !== \"object\" || data.data.length <= 0) {\r\n        return null;\r\n      }\r\n      for (var i = 0; i < data.data.length; i++) {\r\n        dataItem = this._getItemData(data.data[i]);\r\n        if (hasTransform) {\r\n          try {\r\n            transformedItem = this._options.transform(dataItem);\r\n            this._debug(\"processData\", \"transformed item\", dataItem, transformedItem);\r\n          } catch (err) {\r\n            this._debug(\"processData\", \"error calling transform\", err);\r\n            throw new Error(\"error in transform: \" + err.message);\r\n          }\r\n        } else {\r\n          transformedItem = dataItem;\r\n        }\r\n        if (hasFilter) {\r\n          try {\r\n            filterResult = this._options.filter(transformedItem);\r\n            this._debug(\"processData\", \"filter item result\", transformedItem, filterResult);\r\n          } catch (err) {\r\n            this._debug(\"processData\", \"error calling filter\", err);\r\n            throw new Error(\"error in filter: \" + err.message);\r\n          }\r\n          if (filterResult) {\r\n            transformedFiltered.push(transformedItem);\r\n          }\r\n        } else {\r\n          transformedFiltered.push(transformedItem);\r\n        }\r\n      }\r\n      if (hasSort) {\r\n        try {\r\n          transformedFiltered.sort(this._options.sort);\r\n        } catch (err) {\r\n          this._debug(\"processData\", \"error calling sort\", err);\r\n          throw new Error(\"error in sort: \" + err.message);\r\n        }\r\n      }\r\n      if (hasLimit) {\r\n        limitDelta = transformedFiltered.length - this._options.limit;\r\n        this._debug(\"processData\", \"checking limit\", transformedFiltered.length, this._options.limit, limitDelta);\r\n        if (limitDelta > 0) {\r\n          unusedItems = transformedFiltered.slice(transformedFiltered.length - limitDelta);\r\n          this._debug(\"processData\", \"unusedItems\", unusedItems.length, unusedItems);\r\n          transformedFiltered.splice(transformedFiltered.length - limitDelta, limitDelta);\r\n        }\r\n      }\r\n      return {\r\n        items: transformedFiltered,\r\n        unused: unusedItems\r\n      };\r\n    };\r\n    Instafeed.prototype._extractTags = function extractTags(str) {\r\n      var exp = /#([^\\s]+)/gi;\r\n      var badChars = /[~`!@#$%^&*()\\-+={}[\\]:;\"'<>?,./|\\\\\\s]+/i;\r\n      var tags = [];\r\n      var match = null;\r\n      if (typeof str === \"string\") {\r\n        while ((match = exp.exec(str)) !== null) {\r\n          if (badChars.test(match[1]) === false) {\r\n            tags.push(match[1]);\r\n          }\r\n        }\r\n      }\r\n      return tags;\r\n    };\r\n    Instafeed.prototype._getItemData = function getItemData(data) {\r\n      var type = null;\r\n      var image = null;\r\n      switch (data.media_type) {\r\n       case \"IMAGE\":\r\n        type = \"image\";\r\n        image = data.media_url;\r\n        break;\r\n  \r\n       case \"VIDEO\":\r\n        type = \"video\";\r\n        image = data.thumbnail_url;\r\n        break;\r\n  \r\n       case \"CAROUSEL_ALBUM\":\r\n        type = \"album\";\r\n        image = data.media_url;\r\n        break;\r\n      }\r\n      return {\r\n        caption: data.caption,\r\n        tags: this._extractTags(data.caption),\r\n        id: data.id,\r\n        image: image,\r\n        link: data.permalink,\r\n        model: data,\r\n        timestamp: data.timestamp,\r\n        type: type,\r\n        username: data.username\r\n      };\r\n    };\r\n    Instafeed.prototype._renderData = function renderData(items) {\r\n      var hasTemplate = typeof this._options.template === \"string\";\r\n      var hasRender = typeof this._options.render === \"function\";\r\n      var item = null;\r\n      var itemHtml = null;\r\n      var container = null;\r\n      var html = \"\";\r\n      this._debug(\"renderData\", \"hasTemplate\", hasTemplate, \"hasRender\", hasRender);\r\n      if (typeof items !== \"object\" || items.length <= 0) {\r\n        return;\r\n      }\r\n      for (var i = 0; i < items.length; i++) {\r\n        item = items[i];\r\n        if (hasRender) {\r\n          try {\r\n            itemHtml = this._options.render(item, this._options);\r\n            this._debug(\"renderData\", \"custom render result\", item, itemHtml);\r\n          } catch (err) {\r\n            this._debug(\"renderData\", \"error calling render\", err);\r\n            throw new Error(\"error in render: \" + err.message);\r\n          }\r\n        } else if (hasTemplate) {\r\n          itemHtml = this._basicRender(item);\r\n        }\r\n        if (itemHtml) {\r\n          html = html + itemHtml;\r\n        } else {\r\n          this._debug(\"renderData\", \"render item did not return any content\", item);\r\n        }\r\n      }\r\n      this._debug(\"renderData\", \"html content\", html);\r\n      container = document.createElement(\"div\");\r\n      container.innerHTML = html;\r\n      this._debug(\"renderData\", \"container\", container, container.childNodes.length, container.childNodes);\r\n      while (container.childNodes.length > 0) {\r\n        this._debug(\"renderData\", \"appending child\", container.childNodes[0]);\r\n        this._state.node.appendChild(container.childNodes[0]);\r\n      }\r\n    };\r\n    Instafeed.prototype._basicRender = function basicRender(data) {\r\n      var exp = new RegExp(this._options.templateBoundaries[0] + \"([\\\\s\\\\w.]+)\" + this._options.templateBoundaries[1], \"gm\");\r\n      var template = this._options.template;\r\n      var match = null;\r\n      var output = \"\";\r\n      var substr = null;\r\n      var lastIndex = 0;\r\n      var keyPath = null;\r\n      var keyPathValue = null;\r\n      while ((match = exp.exec(template)) !== null) {\r\n        keyPath = match[1];\r\n        substr = template.slice(lastIndex, match.index);\r\n        output = output + substr;\r\n        keyPathValue = this._valueForKeyPath(keyPath, data);\r\n        if (keyPathValue) {\r\n          output = output + keyPathValue.toString();\r\n        }\r\n        lastIndex = exp.lastIndex;\r\n      }\r\n      if (lastIndex < template.length) {\r\n        substr = template.slice(lastIndex, template.length);\r\n        output = output + substr;\r\n      }\r\n      return output;\r\n    };\r\n    Instafeed.prototype._valueForKeyPath = function valueForKeyPath(keyPath, data) {\r\n      var exp = /([\\w]+)/gm;\r\n      var match = null;\r\n      var key = null;\r\n      var lastValue = data;\r\n      while ((match = exp.exec(keyPath)) !== null) {\r\n        if (typeof lastValue !== \"object\") {\r\n          return null;\r\n        }\r\n        key = match[1];\r\n        lastValue = lastValue[key];\r\n      }\r\n      return lastValue;\r\n    };\r\n    Instafeed.prototype._fail = function fail(err) {\r\n      var didHook = this._runHook(\"error\", err);\r\n      if (!didHook && console && typeof console.error === \"function\") {\r\n        console.error(err);\r\n      }\r\n      this._state.running = false;\r\n    };\r\n    Instafeed.prototype._start = function start() {\r\n      this._state.running = true;\r\n      this._runHook(\"before\");\r\n    };\r\n    Instafeed.prototype._finish = function finish() {\r\n      this._runHook(\"after\");\r\n      this._state.running = false;\r\n    };\r\n    Instafeed.prototype._success = function success(data) {\r\n      this._runHook(\"success\", data);\r\n      this._state.running = false;\r\n    };\r\n    Instafeed.prototype._makeApiRequest = function makeApiRequest(url, callback) {\r\n      var called = false;\r\n      var scope = this;\r\n      var apiRequest = null;\r\n      var callbackOnce = function callbackOnce(err, value) {\r\n        if (!called) {\r\n          called = true;\r\n          callback(err, value);\r\n        }\r\n      };\r\n      apiRequest = new XMLHttpRequest();\r\n      apiRequest.ontimeout = function apiRequestTimedOut() {\r\n        callbackOnce(new Error(\"api request timed out\"));\r\n      };\r\n      apiRequest.onerror = function apiRequestOnError() {\r\n        callbackOnce(new Error(\"api connection error\"));\r\n      };\r\n      apiRequest.onload = function apiRequestOnLoad(event) {\r\n        var contentType = apiRequest.getResponseHeader(\"Content-Type\");\r\n        var responseJson = null;\r\n        scope._debug(\"apiRequestOnLoad\", \"loaded\", event);\r\n        scope._debug(\"apiRequestOnLoad\", \"response status\", apiRequest.status);\r\n        scope._debug(\"apiRequestOnLoad\", \"response content type\", contentType);\r\n        if (contentType.indexOf(\"application/json\") >= 0) {\r\n          try {\r\n            responseJson = JSON.parse(apiRequest.responseText);\r\n          } catch (err) {\r\n            scope._debug(\"apiRequestOnLoad\", \"json parsing error\", err, apiRequest.responseText);\r\n            callbackOnce(new Error(\"error parsing response json\"));\r\n            return;\r\n          }\r\n        }\r\n        if (apiRequest.status !== 200) {\r\n          if (responseJson && responseJson.error) {\r\n            callbackOnce(new Error(responseJson.error.code + \" \" + responseJson.error.message));\r\n          } else {\r\n            callbackOnce(new Error(\"status code \" + apiRequest.status));\r\n          }\r\n          return;\r\n        }\r\n        callbackOnce(null, responseJson);\r\n      };\r\n      apiRequest.open(\"GET\", url, true);\r\n      apiRequest.timeout = this._options.apiTimeout;\r\n      apiRequest.send();\r\n    };\r\n    Instafeed.prototype._getAccessToken = function getAccessToken(callback) {\r\n      var called = false;\r\n      var scope = this;\r\n      var timeoutCheck = null;\r\n      var callbackOnce = function callbackOnce(err, value) {\r\n        if (!called) {\r\n          called = true;\r\n          clearTimeout(timeoutCheck);\r\n          callback(err, value);\r\n        }\r\n      };\r\n      if (typeof this._options.accessToken === \"function\") {\r\n        this._debug(\"getAccessToken\", \"calling accessToken as function\");\r\n        timeoutCheck = setTimeout(function accessTokenTimeoutCheck() {\r\n          scope._debug(\"getAccessToken\", \"timeout check\", called);\r\n          callbackOnce(new Error(\"accessToken timed out\"), null);\r\n        }, this._options.accessTokenTimeout);\r\n        try {\r\n          this._options.accessToken(function accessTokenReceiver(err, value) {\r\n            scope._debug(\"getAccessToken\", \"received accessToken callback\", called, err, value);\r\n            callbackOnce(err, value);\r\n          });\r\n        } catch (err) {\r\n          this._debug(\"getAccessToken\", \"error invoking the accessToken as function\", err);\r\n          callbackOnce(err, null);\r\n        }\r\n      } else {\r\n        this._debug(\"getAccessToken\", \"treating accessToken as static\", typeof this._options.accessToken);\r\n        callbackOnce(null, this._options.accessToken);\r\n      }\r\n    };\r\n    Instafeed.prototype._debug = function debug() {\r\n      var args = null;\r\n      if (this._options.debug && console && typeof console.log === \"function\") {\r\n        args = [].slice.call(arguments);\r\n        args[0] = \"[Instafeed] [\" + args[0] + \"]\";\r\n        console.log.apply(null, args);\r\n      }\r\n    };\r\n    Instafeed.prototype._runHook = function runHook(hookName, data) {\r\n      var success = false;\r\n      if (typeof this._options[hookName] === \"function\") {\r\n        try {\r\n          this._options[hookName](data);\r\n          success = true;\r\n        } catch (err) {\r\n          this._debug(\"runHook\", \"error calling hook\", hookName, err);\r\n        }\r\n      }\r\n      return success;\r\n    };\r\n    return Instafeed;\r\n  });"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}